<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ì˜ˆìƒ ë¹„ë°€ë²ˆí˜¸ ìƒì„±ê¸°</title>
  <style>
    body { font-family: sans-serif; margin: 30px; }
    label { display: block; margin-top: 15px; }
    input, select, button { margin-top: 5px; padding: 6px; width: 300px; }
    .inline-group { display: flex; align-items: center; gap: 10px; }
    .hidden { display: none; }
    #resultBox { margin-top: 20px; white-space: pre-wrap; border: 1px solid #ccc; padding: 10px; width: 90%; background: #f9f9f9; }
    #intro { background: #eef; padding: 10px; border: 1px solid #88c; margin-bottom: 20px; width: 95%; }
  </style>
</head>
<body>

<div id="intro">
  <strong>ë‹¹ì‹ ì˜ ë¹„ë°€ë²ˆí˜¸ë¥¼ ë§í˜€ë³´ê² ìŠµë‹ˆë‹¤.</strong><br><br>
  ğŸ“Œ <u>ì˜ˆìƒ ë¹„ë°€ë²ˆí˜¸ ìƒì„± ê·œì¹™</u>:<br>
  - ì†Œë¬¸ìë§Œ ì‚¬ìš© (7~10ì)<br>
  - íŠ¹ìˆ˜ë¬¸ì ë°˜ë“œì‹œ í¬í•¨ (!@#$%^&*)<br>
  - ì´ë¦„/ìƒì¼/ë‹‰ë„¤ì„/ì „í™”ë²ˆí˜¸ ë“±ì˜ ì •ë³´ë¥¼ ì¡°í•©í•˜ì—¬ ìƒì„±ë©ë‹ˆë‹¤.<br>
</div>

<!-- Step 1 -->
<div id="step1">
  <label>ì´ë¦„ (ì˜ˆ: Min)</label><input type="text" id="firstName">
  <label>ì„± (ì˜ˆ: Kim)</label><input type="text" id="lastName">

  <label>ìƒë…„ì›”ì¼</label><input type="date" id="birth">

  <label>ì „í™”ë²ˆí˜¸</label><input type="text" id="phone">

  <label>ì§‘ì „í™”ë²ˆí˜¸</label>
  <div class="inline-group">
    <input type="text" id="homePhone">
    <label><input type="checkbox" id="noHomePhone"> ì—†ìŒ</label>
  </div>

  <button onclick="goToStep2()">ë‹¤ìŒ</button>
</div>

<!-- Step 2 -->
<div id="step2" class="hidden">
  <label>ë³„ëª…</label><input type="text" id="nickname">

  <label>ë°˜ë ¤ë™ë¬¼ ì´ë¦„ë“¤ (ì‰¼í‘œë¡œ êµ¬ë¶„)</label>
  <div class="inline-group">
    <input type="text" id="petNames">
    <label><input type="checkbox" id="noPet"> ì—†ìŒ</label>
  </div>

  <label>ìì£¼ ì‚¬ìš©í•˜ëŠ” ìˆ«ìë“¤ (ì‰¼í‘œë¡œ êµ¬ë¶„)</label><input type="text" id="favNums">

  <label>ì„ í˜¸ íŠ¹ìˆ˜ë¬¸ìë“¤ (ì˜ˆ: !,@,$)</label><input type="text" id="specialChars">

  <label>ë¹„ë°€ë²ˆí˜¸ì— ì´ë¦„ì„ í¬í•¨í•©ë‹ˆê¹Œ?</label>
  <select id="includeName"><option value="yes">ì˜ˆ</option><option value="no">ì•„ë‹ˆì˜¤</option></select>

  <label>ë¬¸ì ì¹˜í™˜(S â†’ $ ë“±)ì„ ì‚¬ìš©í•©ë‹ˆê¹Œ?</label>
  <select id="useLeet"><option value="yes">ì˜ˆ</option><option value="no">ì•„ë‹ˆì˜¤</option></select>

  <button onclick="generatePasswords()">ë¹„ë°€ë²ˆí˜¸ ìƒì„± ë° ë‹¤ìš´ë¡œë“œ</button>
</div>

<div id="resultBox"></div>

<script>
const leetMap = { 'a': '@', 's': '$', 'i': '1', 'o': '0', 'e': '3' };

function applyLeet(word, useLeet) {
  if (!useLeet) return word;
  return word.split('').map(c => leetMap[c] || c).join('');
}

function isValidName(name) {
  return /^[A-Z][a-z]+$/.test(name);
}

function goToStep2() {
  const firstName = document.getElementById("firstName").value.trim();
  const lastName = document.getElementById("lastName").value.trim();
  const birth = document.getElementById("birth").value;
  const phone = document.getElementById("phone").value.trim();

  if (!isValidName(firstName) || !isValidName(lastName)) {
    alert("ì´ë¦„ê³¼ ì„±ì€ ì˜ì–´ë¡œ ì…ë ¥í•˜ê³ , ì´ë‹ˆì…œë§Œ ëŒ€ë¬¸ìë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ˆ: Min, Kim");
    return;
  }
  if (!birth) {
    alert("ìƒë…„ì›”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");
    return;
  }
  if (!phone) {
    alert("ì „í™”ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");
    return;
  }

  document.getElementById('step1').classList.add('hidden');
  document.getElementById('step2').classList.remove('hidden');
}

function generatePasswords() {
  const firstName = document.getElementById("firstName").value.trim().toLowerCase();
  const lastName = document.getElementById("lastName").value.trim().toLowerCase();
  const birth = document.getElementById("birth").value;
  const phone = document.getElementById("phone").value.trim();
  const homePhone = document.getElementById("noHomePhone").checked ? "" : document.getElementById("homePhone").value.trim();

  const nickname = document.getElementById("nickname").value.trim().toLowerCase();
  const petNames = document.getElementById("noPet").checked ? [] :
    document.getElementById("petNames").value.split(',').map(p => p.trim().toLowerCase());
  const favNums = document.getElementById("favNums").value.split(',').map(n => n.trim()).filter(Boolean);
  const specialChars = document.getElementById("specialChars").value.split(',').map(s => s.trim()).filter(Boolean);

  const includeName = document.getElementById("includeName").value === 'yes';
  const useLeet = document.getElementById("useLeet").value === 'yes';

  if (specialChars.length === 0) {
    alert("ìµœì†Œ í•˜ë‚˜ ì´ìƒì˜ íŠ¹ìˆ˜ë¬¸ìë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");
    return;
  }

  const baseWords = [nickname, ...petNames];
  if (includeName) baseWords.push(firstName, lastName);

  const numberParts = [];
  if (birth) {
    const [y, m, d] = birth.split("-");
    numberParts.push(y, m + d);
  }
  numberParts.push(...favNums);
  if (phone.length >= 4) numberParts.push(phone.slice(-4));
  if (homePhone.length >= 4) numberParts.push(homePhone.slice(-4));

  const passwords = new Set();

  outer: for (let word of baseWords) {
    for (let num of numberParts) {
      for (let s of specialChars) {
        const combos = [
          word + num + s,
          s + word + num,
          word + s + num,
          num + word + s,
          applyLeet(word, useLeet) + num + s,
          applyLeet(word + num, useLeet) + s
        ];
        for (let pw of combos) {
          if (pw.length >= 7 && pw.length <= 10 && /[!@#$%^&*]/.test(pw)) {
            passwords.add(pw);
            if (passwords.size >= 10000) break outer;
          }
        }
      }
    }
  }

  // ë¶€ì¡±í•  ê²½ìš° ëœë¤ ë¬¸ìì—´ë¡œ ì±„ì›€
  const alphabet = "abcdefghijklmnopqrstuvwxyz";
  const specials = "!@#$%^&*";
  while (passwords.size < 10000) {
    let word = "";
    const len = 7 + Math.floor(Math.random() * 4);
    for (let i = 0; i < len - 1; i++) {
      word += alphabet[Math.floor(Math.random() * alphabet.length)];
    }
    word += specials[Math.floor(Math.random() * specials.length)];
    passwords.add(word);
  }

  const pwList = Array.from(passwords);
  document.getElementById("resultBox").innerText = `âœ… 10,000ê°œì˜ ë¹„ë°€ë²ˆí˜¸ ìƒì„± ì™„ë£Œ. ì•„ë˜ ë²„íŠ¼ì„ ëˆŒëŸ¬ ë‹¤ìš´ë¡œë“œí•˜ì„¸ìš”.`;

  const blob = new Blob([pwList.join('\n')], { type: 'text/plain' });
  const a = document.createElement('a');
  a.href = URL.createObjectURL(blob);
  a.download = 'generated_passwords.txt';
  a.textContent = 'ğŸ‘‰ ì˜ˆìƒ ë¹„ë°€ë²ˆí˜¸ íŒŒì¼ ë‹¤ìš´ë¡œë“œ';
  a.style.display = 'inline-block';
  a.style.marginTop = '10px';
  document.getElementById("resultBox").appendChild(a);
}
</script>

</body>
</html>
